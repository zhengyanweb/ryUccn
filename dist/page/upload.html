<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<title>Document</title>
	<script src="../assets/js/jquery-1.7.1.js"></script>
	<script src="../assets/js/ajaxfileupload.js"></script>
</head>

<body>
	<p><input type="file" id="file1" name="file" /></p>
	<input type="button" value="上传" />
	<p><img id="img1" alt="上传成功" src="" /></p>
	<script>
		$(function () {
			$(":button").click(function () {
				ajaxFileUpload();
			})
		})

		function ajaxFileUpload() {
			$.ajaxFileUpload({
				url: '/webform.aspx', //用于文件上传的服务器端请求地址
				secureuri: false, //一般设置为false
				fileElementId: 'file1', //文件上传空间的id属性  <input type="file" id="file" name="file" />
				dataType: 'json', //返回值类型 一般设置为json
				success: function (data, status) //服务器成功响应处理函数
				{
					$("#img1").attr("src", data.imgurl);
					if (typeof (data.error) != 'undefined') {
						if (data.error != '') {
							alert(data.error);
						} else {
							alert(data.msg);
						}
					}
				},
				error: function (data, status, e) //服务器响应失败处理函数
				{
					alert(e);
				}
			})
			return false;
		}
	</script>
</body>

</html>